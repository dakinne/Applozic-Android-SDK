<html>

<head>
	<style type="text/css">
		form label {
			display: inline-block;
			width: 100px;
			text-align: right;
		}
		form input {
			width: 200px;
			margin-left: 10px;
		}
		form div {
			padding: 5px;
		}
		form div.button {
			margin-left: 110px;
		}
		form button {
			width: 210px;
			padding: 5px;
		}
		form {
			width: 350px;
		}
	</style>
</head>

<body>
<h1>C H A T</h1>
<!--a href="#" class="applozic-launcher" data-mck-id="dyss" data-mck-name="dyss">CHAT BUTTON</a-->

<form>
	<div>
        <label for="name">Message:</label>
        <input type="text" id="message" />
    </div>
	<div>
        <label for="name">Username:</label>
        <input type="text" id="user" />
    </div>
	<div>
        <label for="name">ProductId:</label>
        <input type="text" id="productId" />
    </div>
	<div class="button">
		<button onclick="sendProduct()">Send</button>
	</div>
</form>

<script type="text/javascript">
	function sendProduct() {
		console.log("sendProduct");
		var message   = document.getElementById('message').value;
		var user      = document.getElementById('user').value;
		var productId = document.getElementById('productId').value;

		$applozic.fn.applozic('sendMessage', {
                        'to'       : user,
                        'message'  : message,
                        'metadata' : {
                        	'type'      : 'PRODUCT',
                        	'productId' : productId
                        }
                   	});
	}

   var applozicApplicationKey = 'promocionesfarma1d2cd5e060b84b5c1540d30c30d6ea70',
       userName               = 'webUser',
       userId                 = 'webUser';

   (function(d, m){var s, h;       
   s = document.createElement("script");
   s.type = "text/javascript";
   s.async=true;
   s.src="https://apps.applozic.com/sidebox.app";
   h=document.getElementsByTagName('head')[0];
   h.appendChild(s);
   window.applozic=m;
   m.init=function(t){m._globals=t;}})(document, window.applozic || {});

  window.applozic.init({
    appId: applozicApplicationKey,      //Get your application key from https://www.applozic.com
    userId: userId,                     //Logged in user's id, a unique identifier for user
    userName: userName,                 //User's display name
    imageLink : '',                     //User's profile picture url
    email : '',                         //optional
    contactNumber: '',                  //optional, pass with internationl code eg: +13109097458
    desktopNotification: true,
    source: '1',                          // optional, WEB(1),DESKTOP_BROWSER(5), MOBILE_BROWSER(6)
    notificationIconLink: 'https://www.applozic.com/favicon.ico',    //Icon to show in desktop notification, replace with your icon
    authenticationTypeId: 1,          //1 for password verification from Applozic server and 0 for access Token verification from your server
    accessToken: '',                    //optional, leave it blank for testing purpose, read this if you want to add additional security by verifying password from your server https://www.applozic.com/docs/configuration.html#access-token-url
    locShare: true,
    googleApiKey: "AIzaSyDKfWHzu9X7Z2hByeW4RRFJrD9SizOzZt4",   // your project google api key 
    googleMapScriptLoaded : false,   // true if your app already loaded google maps script
    mapStaticAPIkey: "AIzaSyCWRScTDtbt8tlXDr6hiceCsU83aS2UuZw",
    autoTypeSearchEnabled : true,     // set to false if you don't want to allow sending message to user who is not in the contact list
    loadOwnContacts : false, //set to true if you want to populate your own contact list (see Step 4 for reference)
    olStatus: false,         //set to true for displaying a green dot in chat screen for users who are online
    onInit : function(response) {
       if (response === "success") {
          // login successful, perform your actions if any, for example: load contacts, getting unread message count, etc
       } else {
          // error in user login/register (you can hide chat button or refresh page)
       }
   },
   contactDisplayName: function(otherUserId) {
         //return the display name of the user from your application code based on userId.
         return "";
   },
   contactDisplayImage: function(otherUserId) {
         //return the display image url of the user from your application code based on userId.
         return "";
   },
   onTabClicked: function(response) {
         // write your logic to execute task on tab load
         //   object response =  {
         //    tabId : userId or groupId,
         //    isGroup : 'tab is group or not'
         //  }
   }
  });
</script>
</body>

</html>